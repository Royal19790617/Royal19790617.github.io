<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>浅谈理解HTTP和HTTPS | Royal&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="HTTP和HTTPS什么是HTTP 超文本传输协议，是一个基于请求与响应，无状态的，应用层的协议，常基于TCP&#x2F;IP协议传输数据，互联网上应用最为广泛的一种网络协议,所有的WWW文件都必须遵守这个标准。设计HTTP的初衷是为了提供一种发布和接收HTML页面的方法。">
<meta property="og:type" content="article">
<meta property="og:title" content="浅谈理解HTTP和HTTPS">
<meta property="og:url" content="https://royal19790617.github.io/2021/03/16/%E6%B5%85%E8%B0%88%E7%90%86%E8%A7%A3HTTP%E5%92%8CHTTPS/index.html">
<meta property="og:site_name" content="Royal&#39;s Blog">
<meta property="og:description" content="HTTP和HTTPS什么是HTTP 超文本传输协议，是一个基于请求与响应，无状态的，应用层的协议，常基于TCP&#x2F;IP协议传输数据，互联网上应用最为广泛的一种网络协议,所有的WWW文件都必须遵守这个标准。设计HTTP的初衷是为了提供一种发布和接收HTML页面的方法。">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://royal19790617.github.io/2021/03/16/%E6%B5%85%E8%B0%88%E7%90%86%E8%A7%A3HTTP%E5%92%8CHTTPS/20180723105652242.jpg">
<meta property="og:image" content="https://royal19790617.github.io/2021/03/16/%E6%B5%85%E8%B0%88%E7%90%86%E8%A7%A3HTTP%E5%92%8CHTTPS/2019080311162578.png">
<meta property="og:image" content="https://royal19790617.github.io/2021/03/16/%E6%B5%85%E8%B0%88%E7%90%86%E8%A7%A3HTTP%E5%92%8CHTTPS/20180719103559793.png">
<meta property="og:image" content="https://royal19790617.github.io/2021/03/16/%E6%B5%85%E8%B0%88%E7%90%86%E8%A7%A3HTTP%E5%92%8CHTTPS/20180719094739178.jpg">
<meta property="og:image" content="https://royal19790617.github.io/2021/03/16/%E6%B5%85%E8%B0%88%E7%90%86%E8%A7%A3HTTP%E5%92%8CHTTPS/20180719094756330.jpg">
<meta property="article:published_time" content="2021-03-16T04:27:50.000Z">
<meta property="article:modified_time" content="2021-03-16T04:32:29.582Z">
<meta property="article:author" content="Royal">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://royal19790617.github.io/2021/03/16/%E6%B5%85%E8%B0%88%E7%90%86%E8%A7%A3HTTP%E5%92%8CHTTPS/20180723105652242.jpg">
  
    <link rel="alternate" href="/atom.xml" title="Royal's Blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Royal&#39;s Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://royal19790617.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-浅谈理解HTTP和HTTPS" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/03/16/%E6%B5%85%E8%B0%88%E7%90%86%E8%A7%A3HTTP%E5%92%8CHTTPS/" class="article-date">
  <time class="dt-published" datetime="2021-03-16T04:27:50.000Z" itemprop="datePublished">2021-03-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      浅谈理解HTTP和HTTPS
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="HTTP和HTTPS"><a href="#HTTP和HTTPS" class="headerlink" title="HTTP和HTTPS"></a>HTTP和HTTPS</h2><h3 id="什么是HTTP"><a href="#什么是HTTP" class="headerlink" title="什么是HTTP"></a>什么是HTTP</h3><ul>
<li>超文本传输协议，是一个基于请求与响应，无状态的，应用层的协议，常基于TCP/IP协议传输数据，互联网上应用最为广泛的一种网络协议,所有的WWW文件都必须遵守这个标准。设计HTTP的初衷是为了提供一种发布和接收HTML页面的方法。<span id="more"></span></li>
</ul>
<h4 id="HTTP-1-1和HTTP-2的主要区别"><a href="#HTTP-1-1和HTTP-2的主要区别" class="headerlink" title="HTTP/1.1和HTTP/2的主要区别"></a>HTTP/1.1和HTTP/2的主要区别</h4><ul>
<li>多路复用：通过单一的HTTP/2连接请求发起多重的请求-响应消息，多个请求stream共享一个TCP连接，实现多留并行而不是依赖建立多个TCP连接。HTTP/2性能占优势。<br><img src="20180723105652242.jpg"></li>
</ul>
<h4 id="HTTP的报文格式"><a href="#HTTP的报文格式" class="headerlink" title="HTTP的报文格式"></a>HTTP的报文格式</h4><p><img src="2019080311162578.png"></p>
<h3 id="什么是HTTPS"><a href="#什么是HTTPS" class="headerlink" title="什么是HTTPS"></a>什么是HTTPS</h3><ul>
<li>《图解HTTP》这本书中曾提过HTTPS是身披SSL外壳的HTTP。HTTPS是一种通过计算机网络进行安全通信的传输协议，经由HTTP进行通信，利用SSL/TLS建立全信道，加密数据包。HTTPS使用的主要目的是提供对网站服务器的身份认证，同时保护交换数据的隐私与完整性。</li>
</ul>
<p>PS:TLS是传输层加密协议，前身是SSL协议，由网景公司1995年发布，有时候两者不区分。</p>
<h3 id="HTTP和HTTPS的优缺点"><a href="#HTTP和HTTPS的优缺点" class="headerlink" title="HTTP和HTTPS的优缺点"></a>HTTP和HTTPS的优缺点</h3><h4 id="HTTP特点：HTTP协议传输数据以明文形式显示"><a href="#HTTP特点：HTTP协议传输数据以明文形式显示" class="headerlink" title="HTTP特点：HTTP协议传输数据以明文形式显示"></a>HTTP特点：HTTP协议传输数据以明文形式显示</h4><ul>
<li>无状态：协议对客户端没有状态存储，对事物处理没有“记忆”能力，比如访问一个网站需要反复进行登录操作</li>
<li>无连接：HTTP/1.1之前，由于无状态特点，每次请求需要通过TCP三次握手四次挥手，和服务器重新建立连接。比如某个客户机在短时间多次请求同一个资源，服务器并不能区别是否已经响应过用户的请求，所以每次需要重新响应请求，需要耗费不必要的时间和流量。</li>
<li>基于请求和响应：基本的特性，由客户端发起请求，服务端响应</li>
<li>简单快速、灵活</li>
<li>通信使用明文、请求和响应不会对通信方进行确认、无法保护数据的完整性</li>
</ul>
<h4 id="HTTPS特点：数据非明文传输"><a href="#HTTPS特点：数据非明文传输" class="headerlink" title="HTTPS特点：数据非明文传输"></a>HTTPS特点：数据非明文传输</h4><p>基于HTTP协议，通过SSL或TLS提供加密处理数据、验证对方身份以及数据完整性保护</p>
<h5 id="内容加密：采用混合加密技术，中间者无法直接查看明文内容"><a href="#内容加密：采用混合加密技术，中间者无法直接查看明文内容" class="headerlink" title="内容加密：采用混合加密技术，中间者无法直接查看明文内容"></a>内容加密：采用混合加密技术，中间者无法直接查看明文内容</h5><ul>
<li>混合加密：结合非对称加密和对称加密技术。客户端使用对称加密生成密钥对传输数据进行加密，然后使用非对称加密的公钥再对秘钥进行加密，所以网络上传输的数据是被秘钥加密的密文和用公钥加密后的秘密秘钥，因此即使被黑客截取，由于没有私钥，无法获取到加密明文的秘钥，便无法获取到明文数据。</li>
<li>数字摘要：通过单向hash函数对原文进行哈希，将需加密的明文“摘要”成一串固定长度(如128bit)的密文，不同的明文摘要成的密文其结果总是不相同，同样的明文其摘要必定一致，并且即使知道了摘要也不能反推出明文。</li>
<li>数字签名技术：数字签名建立在公钥加密体制基础上，是公钥加密技术的另一类应用。它把公钥加密技术和数字摘要结合起来，形成了实用的数字签名技术。</li>
</ul>
<h5 id="验证身份：通过证书认证客户端访问的是自己的服务器"><a href="#验证身份：通过证书认证客户端访问的是自己的服务器" class="headerlink" title="验证身份：通过证书认证客户端访问的是自己的服务器"></a>验证身份：通过证书认证客户端访问的是自己的服务器</h5><ul>
<li>收方能够证实发送方的真实身份；</li>
</ul>
<h5 id="保护数据完整性：防止传输的内容被中间人冒充或者篡改"><a href="#保护数据完整性：防止传输的内容被中间人冒充或者篡改" class="headerlink" title="保护数据完整性：防止传输的内容被中间人冒充或者篡改"></a>保护数据完整性：防止传输的内容被中间人冒充或者篡改</h5><ul>
<li>发送方事后不能否认所发送过的报文；</li>
<li>收方或非法者不能伪造、篡改报文。<br><img src="20180719103559793.png"></li>
</ul>
<h5 id="使用非对称加密"><a href="#使用非对称加密" class="headerlink" title="使用非对称加密"></a>使用非对称加密</h5><ul>
<li><p>非对称加密过程需要用到公钥进行加密，那么公钥从何而来？其实公钥就被包含在数字证书中，数字证书通常来说是由受信任的数字证书颁发机构CA，在验证服务器身份后颁发，证书中包含了一个密钥对（公钥和私钥）和所有者识别信息。数字证书被放到服务端，具有服务器身份验证和数据传输加密功能。<br><img src="20180719094739178.jpg"></p>
</li>
<li><p>客户端输入URL回车，DNS解析域名得到服务器的IP地址，服务器在80端口监听客户端请求，端口通过TCP/IP协议（可以通过Socket实现）建立连接。HTTP属于TCP/IP模型中的运用层协议，所以通信的过程其实是对应数据的入栈和出栈。<br><img src="20180719094756330.jpg"></p>
</li>
</ul>
<h5 id="HTTPS运行流程"><a href="#HTTPS运行流程" class="headerlink" title="HTTPS运行流程"></a>HTTPS运行流程</h5><ul>
<li><ol>
<li>client向server发送请求<a target="_blank" rel="noopener" href="https://baidu.com,然后连接到server的443端口,发送的信息主要是随机值1和客户端支持的加密算法./">https://baidu.com，然后连接到server的443端口，发送的信息主要是随机值1和客户端支持的加密算法。</a></li>
</ol>
</li>
<li><ol start="2">
<li>server接收到信息之后给予client响应握手信息，包括随机值2和匹配好的协商加密算法，这个加密算法一定是client发送给server加密算法的子集。</li>
</ol>
</li>
<li><ol start="3">
<li>随即server给client发送第二个响应报文是数字证书。服务端必须要有一套数字证书，可以自己制作，也可以向组织申请。区别就是自己颁发的证书需要客户端验证通过，才可以继续访问，而使用受信任的公司申请的证书则不会弹出提示页面，这套证书其实就是一对公钥和私钥。传送证书，这个证书其实就是公钥，只是包含了很多信息，如证书的颁发机构，过期时间、服务端的公钥，第三方证书认证机构(CA)的签名，服务端的域名信息等内容。</li>
</ol>
</li>
<li><ol start="4">
<li>客户端解析证书，这部分工作是由客户端的TLS来完成的，首先会验证公钥是否有效，比如颁发机构，过期时间等等，如果发现异常，则会弹出一个警告框，提示证书存在问题。如果证书没有问题，那么就生成一个随即值（预主秘钥）。</li>
</ol>
</li>
<li><ol start="5">
<li>客户端认证证书通过之后，接下来是通过随机值1、随机值2和预主秘钥组装会话秘钥。然后通过证书的公钥加密会话秘钥。</li>
</ol>
</li>
<li><ol start="6">
<li>传送加密信息，这部分传送的是用证书加密后的会话秘钥，目的就是让服务端使用秘钥解密得到随机值1、随机值2和预主秘钥。</li>
</ol>
</li>
<li><ol start="7">
<li>服务端解密得到随机值1、随机值2和预主秘钥，然后组装会话秘钥，跟客户端会话秘钥相同。</li>
</ol>
</li>
<li><ol start="8">
<li>客户端通过会话秘钥加密一条消息发送给服务端，主要验证服务端是否正常接受客户端加密的消息。</li>
</ol>
</li>
<li><ol start="9">
<li>同样服务端也会通过会话秘钥加密一条消息回传给客户端，如果客户端能够正常接受的话表明SSL层连接建立完成了。</li>
</ol>
</li>
</ul>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ul>
<li>HTTPS从安全性上比HTTP要安全，理论上只要SSL证书体系安全，HTTPS是安全的，但是SSL证书的信用链体系并不安全</li>
<li>HTTPS连接缓存不如HTTP高效，服务器端资源占用高与HTTP，流量成本高。所以基于安全因素，譬如外网选择HTTPS是一定的，但是如果是内网传输则HTTP是优选。</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://royal19790617.github.io/2021/03/16/%E6%B5%85%E8%B0%88%E7%90%86%E8%A7%A3HTTP%E5%92%8CHTTPS/" data-id="ckq983t2t001tsowma1wua8kf" data-title="浅谈理解HTTP和HTTPS" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2021/03/19/JAVA-1-8%E4%B9%8BLAMBDA%E8%A1%A8%E8%BE%BE%E5%BC%8F/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          JAVA 8之LAMBDA表达式
        
      </div>
    </a>
  
  
    <a href="/2021/03/12/%E6%B5%85%E8%B0%88%E7%90%86%E8%A7%A3%E7%94%A8%E6%88%B7%E6%8E%88%E6%9D%83%E5%92%8C%E8%AE%A4%E8%AF%81/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">浅谈理解用户授权和认证</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/antd/">antd</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/">database</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/docker/">docker</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/js/">js</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/network/">network</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/tips/">tips</a></li></ul>
    </div>
  </div>


  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/06/23/docker-compose%E5%AE%89%E8%A3%85redis%E4%B8%BB%E4%BB%8E%E5%93%A8%E5%85%B5%E9%9B%86%E7%BE%A4/">docker-compose安装redis主从哨兵集群</a>
          </li>
        
          <li>
            <a href="/2021/06/16/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%AD%A6node-06-%E4%B9%8Bmocha%E8%87%AA%E5%8A%A8%E5%8C%96%E6%B5%8B%E8%AF%95/">从零开始学node-06-之mocha自动化测试</a>
          </li>
        
          <li>
            <a href="/2021/06/15/nodejs%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E4%B9%8B%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/">nodejs常见问题之解决之道</a>
          </li>
        
          <li>
            <a href="/2021/05/31/js-unshift%E6%96%B9%E6%B3%95/">js-unshift方法</a>
          </li>
        
          <li>
            <a href="/2021/05/31/lodash%E5%AE%9E%E7%94%A8%E5%87%BD%E6%95%B0%E7%94%A8%E6%B3%95%E5%AE%9D%E5%85%B8-%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0%E4%B8%AD/">lodash实用函数用法宝典-持续更新中</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 Royal<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>